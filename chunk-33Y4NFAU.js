import{b as m,d as A,e as d,i as p,r as l}from"./chunk-YFRBFD7N.js";import{A as u,P as R,Pb as D,U as b,a as q,b as g,n as i,o as n,pa as h,s as a}from"./chunk-TPGXXVT3.js";var v=class f{constructor(r){this.platformId=r;this.isBrowser=D(this.platformId),this.isBrowser&&(this.db=A())}db;isBrowser;getAccountRequests(){if(!this.isBrowser)return n([]);let r=m(l,"accountRequests"),s=d(r);return i(p(s)).pipe(a(t=>{let o=[];return t.forEach(c=>{let e=c.data();o.push(q({id:c.id},e))}),o}),u(t=>(console.error("Error fetching account requests:",t),n([]))))}updateAccountRequestStatus(r,s,t){return this.isBrowser?n(!0):n(!1)}createAccountRequest(r){let s=g(q({},r),{id:`REQ-${Math.floor(Math.random()*1e3)}`,requestDate:new Date,status:"pending"});return n(s)}getAccountRequestsCount(){if(!this.isBrowser)return n(0);let r=m(l,"demande"),s=d(r);return i(p(s)).pipe(a(t=>t.size),u(t=>(console.error("Error counting account requests:",t),n(0))))}getAccountRequestsFromDemande(){if(!this.isBrowser)return n([]);let r=m(l,"demande"),s=d(r);return i(p(s)).pipe(a(t=>{let o=[];return t.forEach(c=>{let e=c.data();o.push({id:c.id,customerName:e.fullName||e.nom||"",customerID:e.id||e.client_id||"",email:e.email||"",phone:e.phone||e.telephone||"",accountType:e.accountType||"current",requestDate:e.requestDate||e.date||new Date,status:e.status||"pending",reason:e.reason||"",initialDeposit:e.initialDeposit||0})}),o}),u(t=>(console.error("Error fetching demande collection:",t),n([]))))}static \u0275fac=function(s){return new(s||f)(b(h))};static \u0275prov=R({token:f,factory:f.\u0275fac,providedIn:"root"})};export{v as a};
