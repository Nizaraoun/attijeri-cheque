import{b as Q,d as U,g as X,p as Z,r as $}from"./chunk-4ONTNCCA.js";import{a as B,b as R,c as q,e as W,g as Y,l as G,m as J,n as K,r as y}from"./chunk-YFRBFD7N.js";import{$ as u,$a as m,Ba as F,Ga as k,Jb as L,Ka as g,Kb as j,Lb as z,Mb as H,P as E,Qa as I,Ra as d,Sa as w,Ta as N,Ua as o,Va as i,Za as b,_a as f,a as C,aa as p,ab as s,b as v,bb as _,cb as T,eb as O,fb as M,gb as P,k as S,n as h,nb as D,ob as V,s as A,xa as a}from"./chunk-TPGXXVT3.js";var x=class e{announcementsSubject=new S([]);collectionRef=R(y,"announcements");unsubscribe=null;constructor(){this.initializeListener()}initializeListener(){let t=W(this.collectionRef,Y("createdAt","desc"));this.unsubscribe=K(t,n=>{let r=[];n.forEach(c=>{let l=c.data();r.push({id:c.id,title:l.title,description:l.description,colorHex:l.colorHex,createdAt:l.createdAt.toDate()})}),this.announcementsSubject.next(r)},n=>{console.error("Error listening to announcements:",n)})}getAnnouncements(){return this.announcementsSubject.asObservable()}addAnnouncement(t){let n=v(C({},t),{createdAt:B.now()});return h(J(this.collectionRef,n)).pipe(A(r=>v(C({id:r.id},t),{createdAt:new Date})))}deleteAnnouncement(t){let n=q(y,"announcements",t);return h(G(n)).pipe(A(()=>!0))}ngOnDestroy(){this.unsubscribe&&this.unsubscribe()}static \u0275fac=function(n){return new(n||e)};static \u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"})};function on(e,t){if(e&1&&(o(0,"div",20)(1,"p"),s(2),i()()),e&2){let n=m(2);a(2),_(n.formError)}}function rn(e,t){if(e&1){let n=b();o(0,"div",21),f("click",function(){let c=u(n).$implicit,l=m(2);return p(!l.isSubmitting&&(l.newAnnouncement.colorHex=c.value))}),i()}if(e&2){let n=t.$implicit,r=m(2);w("background-color",n.value),N("selected",r.newAnnouncement.colorHex===n.value)("disabled",r.isSubmitting),I("title",n.name)}}function cn(e,t){e&1&&(o(0,"span"),s(1,"Cr\xE9ation en cours..."),i())}function an(e,t){e&1&&(o(0,"span"),s(1,"Cr\xE9er l'annonce"),i())}function sn(e,t){if(e&1){let n=b();o(0,"div",7)(1,"h2"),s(2,"Cr\xE9er une Nouvelle Annonce"),i(),g(3,on,3,1,"div",8),o(4,"div",9)(5,"label",10),s(6,"Titre"),i(),o(7,"input",11),P("ngModelChange",function(c){u(n);let l=m();return M(l.newAnnouncement.title,c)||(l.newAnnouncement.title=c),p(c)}),i()(),o(8,"div",9)(9,"label",12),s(10,"Description"),i(),o(11,"textarea",13),P("ngModelChange",function(c){u(n);let l=m();return M(l.newAnnouncement.description,c)||(l.newAnnouncement.description=c),p(c)}),i()(),o(12,"div",9)(13,"label"),s(14,"Couleur"),i(),o(15,"div",14),g(16,rn,1,7,"div",15),i()(),o(17,"div",16)(18,"button",17),f("click",function(){u(n);let c=m();return p(c.resetNewAnnouncementForm())}),s(19,"R\xE9initialiser"),i(),o(20,"button",18),f("click",function(){u(n);let c=m();return p(c.createAnnouncement())}),g(21,cn,2,0,"span",19)(22,an,2,0,"span",19),i()()()}if(e&2){let n=m();a(3),d("ngIf",n.formError),a(4),O("ngModel",n.newAnnouncement.title),d("disabled",n.isSubmitting),a(4),O("ngModel",n.newAnnouncement.description),d("disabled",n.isSubmitting),a(5),d("ngForOf",n.colorOptions),a(2),d("disabled",n.isSubmitting),a(2),d("disabled",n.isSubmitting),a(),d("ngIf",n.isSubmitting),a(),d("ngIf",!n.isSubmitting)}}function ln(e,t){e&1&&(o(0,"div",22)(1,"p"),s(2,"Chargement des annonces..."),i()())}function dn(e,t){e&1&&(o(0,"div",23)(1,"p"),s(2,"Aucune annonce disponible. Cr\xE9ez-en une pour commencer !"),i()())}function mn(e,t){if(e&1){let n=b();o(0,"div",26)(1,"div",27)(2,"h3"),s(3),i(),o(4,"button",28),f("click",function(){let c=u(n).$implicit,l=m(2);return p(l.deleteAnnouncement(c.id))}),o(5,"span"),s(6,"\xD7"),i()()(),o(7,"div",29)(8,"p"),s(9),i()(),o(10,"div",30)(11,"small"),s(12),D(13,"date"),i()()()}if(e&2){let n=t.$implicit;w("border-left-color",n.colorHex),a(3),_(n.title),a(6),_(n.description),a(3),_(V(13,5,n.createdAt,"medium"))}}function un(e,t){if(e&1&&(o(0,"div",24),g(1,mn,14,8,"div",25),i()),e&2){let n=m();a(),d("ngForOf",n.announcements)}}var nn=class e{constructor(t){this.announcementService=t}announcements=[];isLoading=!0;subscription=null;newAnnouncement={title:"",description:"",colorHex:"#4CAF50"};showNewAnnouncementForm=!1;isSubmitting=!1;formError="";colorOptions=[{name:"Green",value:"#4CAF50"},{name:"Blue",value:"#2196F3"},{name:"Yellow",value:"#FFC107"},{name:"Red",value:"#F44336"},{name:"Purple",value:"#9C27B0"}];ngOnInit(){this.loadAnnouncements()}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}loadAnnouncements(){this.isLoading=!0,this.subscription=this.announcementService.getAnnouncements().subscribe({next:t=>{this.announcements=t,this.isLoading=!1},error:t=>{console.error("Error loading announcements:",t),this.isLoading=!1}})}toggleNewAnnouncementForm(){this.showNewAnnouncementForm=!this.showNewAnnouncementForm,this.showNewAnnouncementForm&&this.resetNewAnnouncementForm()}resetNewAnnouncementForm(){this.newAnnouncement={title:"",description:"",colorHex:"#4CAF50"},this.formError=""}createAnnouncement(){if(!this.newAnnouncement.title.trim()||!this.newAnnouncement.description.trim()){this.formError="Please fill in all required fields";return}this.isSubmitting=!0,this.formError="",this.announcementService.addAnnouncement(this.newAnnouncement).subscribe({next:()=>{this.resetNewAnnouncementForm(),this.showNewAnnouncementForm=!1,this.isSubmitting=!1},error:t=>{console.error("Error creating announcement:",t),this.formError="Failed to create announcement. Please try again.",this.isSubmitting=!1}})}deleteAnnouncement(t){confirm("Are you sure you want to delete this announcement?")&&this.announcementService.deleteAnnouncement(t).subscribe({next:n=>{n||console.error("Failed to delete announcement")},error:n=>{console.error("Error deleting announcement:",n),alert("Failed to delete announcement. Please try again.")}})}static \u0275fac=function(n){return new(n||e)(F(x))};static \u0275cmp=k({type:e,selectors:[["app-announcement"]],decls:10,vars:5,consts:[[1,"announcement-container"],[1,"header"],[1,"btn-primary",3,"click"],["class","announcement-form",4,"ngIf"],["class","loading",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","announcements-list",4,"ngIf"],[1,"announcement-form"],["class","form-error",4,"ngIf"],[1,"form-group"],["for","announcementTitle"],["type","text","id","announcementTitle","placeholder","Entrez le titre de l'annonce","required","",3,"ngModelChange","ngModel","disabled"],["for","announcementDescription"],["id","announcementDescription","placeholder","Entrez la description de l'annonce","rows","4","required","",3,"ngModelChange","ngModel","disabled"],[1,"color-selector"],["class","color-option",3,"backgroundColor","selected","disabled","click",4,"ngFor","ngForOf"],[1,"form-actions"],[1,"btn-secondary",3,"click","disabled"],[1,"btn-primary",3,"click","disabled"],[4,"ngIf"],[1,"form-error"],[1,"color-option",3,"click"],[1,"loading"],[1,"empty-state"],[1,"announcements-list"],["class","announcement-card",3,"borderLeftColor",4,"ngFor","ngForOf"],[1,"announcement-card"],[1,"card-header"],["title","Supprimer l'annonce",1,"btn-delete",3,"click"],[1,"card-body"],[1,"card-footer"]],template:function(n,r){n&1&&(o(0,"div",0)(1,"div",1)(2,"h1"),s(3,"Annonces"),i(),o(4,"button",2),f("click",function(){return r.toggleNewAnnouncementForm()}),s(5),i()(),g(6,sn,23,10,"div",3)(7,ln,3,0,"div",4)(8,dn,3,0,"div",5)(9,un,2,1,"div",6),i()),n&2&&(a(5),T(" ",r.showNewAnnouncementForm?"Annuler":"Nouvelle Annonce"," "),a(),d("ngIf",r.showNewAnnouncementForm),a(),d("ngIf",r.isLoading),a(),d("ngIf",!r.isLoading&&r.announcements.length===0),a(),d("ngIf",!r.isLoading&&r.announcements.length>0))},dependencies:[H,L,j,z,$,Q,U,Z,X],styles:[".announcement-container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;color:#333}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:4px;font-weight:500;cursor:pointer;transition:all .2s ease}.btn-primary[_ngcontent-%COMP%]:disabled, .btn-secondary[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.btn-primary[_ngcontent-%COMP%]{background-color:#2196f3;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#1976d2}.btn-secondary[_ngcontent-%COMP%]{background-color:#f1f1f1;color:#333}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#e0e0e0}.btn-delete[_ngcontent-%COMP%]{background:none;border:none;color:#f44336;font-size:20px;cursor:pointer;padding:4px 8px;line-height:1}.btn-delete[_ngcontent-%COMP%]:hover{background-color:#f443361a;border-radius:50%}.announcement-form[_ngcontent-%COMP%]{background-color:#f9f9f9;padding:20px;border-radius:8px;box-shadow:0 2px 4px #0000001a;margin-bottom:30px}.announcement-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;margin-bottom:20px;color:#333}.form-error[_ngcontent-%COMP%]{background-color:#ffebee;border-left:4px solid #f44336;padding:10px 15px;margin-bottom:20px;border-radius:4px}.form-error[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#d32f2f}.form-group[_ngcontent-%COMP%]{margin-bottom:16px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-weight:500;color:#555}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;font-size:14px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#2196f3;box-shadow:0 0 0 2px #2196f333}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:disabled{background-color:#f5f5f5;cursor:not-allowed}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;margin-top:20px}.color-selector[_ngcontent-%COMP%]{display:flex;gap:10px}.color-option[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%;cursor:pointer;box-shadow:0 2px 4px #0000001a;transition:transform .2s ease}.color-option[_ngcontent-%COMP%]:hover:not(.disabled){transform:scale(1.1)}.color-option.selected[_ngcontent-%COMP%]{box-shadow:0 0 0 2px #fff,0 0 0 4px #333}.color-option.disabled[_ngcontent-%COMP%]{opacity:.7;cursor:not-allowed}.loading[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{text-align:center;padding:40px 0;color:#777}.announcements-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px}.announcement-card[_ngcontent-%COMP%]{background-color:#fff;box-shadow:0 2px 8px #0000001a;border-radius:8px;overflow:hidden;transition:transform .2s ease,box-shadow .2s ease;border-left:5px solid #ccc}.announcement-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 4px 12px #00000026}.announcement-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:16px 20px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #eee}.announcement-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px;color:#333}.announcement-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:16px 20px;color:#555}.announcement-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;line-height:1.5}.announcement-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{padding:12px 20px;border-top:1px solid #eee;background-color:#fafafa}.announcement-card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#888;font-size:12px}"]})};export{nn as AnnouncementComponent};
